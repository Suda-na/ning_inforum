<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人资料</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet">
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <style>
        :root { --primary: #3b82f6; --bg-body: #f3f4f6; --radius-md: 8px; }
        body { background-color: var(--bg-body); padding: 20px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; }

        .ibox { background: #fff; border-radius: var(--radius-md); box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .ibox-title { border-bottom: 1px solid #eee; padding: 15px 20px; font-weight: 600; }
        .ibox-content { padding: 30px 40px; }

        .form-control:focus { border-color: var(--primary); }
        .btn-primary { background-color: var(--primary); border-color: var(--primary); }
        .btn-primary:hover { background-color: #2563eb; border-color: #2563eb; }

        .profile-image { float: left; width: 100px; height: 100px; border-radius: 50%; border: 3px solid #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-right: 30px; object-fit: cover; }
        .profile-header { display: flex; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px dashed #eee; }
        .profile-header h2 { margin-top: 10px; font-weight: 700; font-size: 24px; }
        .profile-header p { color: #999; }
        .alert { margin-bottom: 20px; }
    </style>
</head>
<body class="gray-bg">
<div class="row">
    <div class="col-sm-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>编辑个人资料</h5>
            </div>
            <div class="ibox-content">

                <div th:if="${msg}" class="alert alert-info" th:text="${msg}"></div>

                <div class="profile-header">
                    <img class="profile-image"
                         th:src="${user.avatar != null && user.avatar != ''} ? @{/upload/{f}(f=${user.avatar})} : @{/img/admin_avatar.png}"
                         onerror="this.onerror=null;this.src='https://ui-avatars.com/api/?name=User&background=3b82f6&color=fff'">
                    <div>
                        <h2 th:text="${(user.realName != null ? user.realName : user.username) + ' (' + user.username + ')'}">管理员 (admin)</h2>
                        <p th:text="'系统用户 / 注册于 ' + ${#dates.format(user.createTime, 'yyyy-MM-dd')}">注册信息</p>
                    </div>
                </div>

                <form class="form-horizontal" th:action="@{/user/updateProfile}" th:object="${user}" method="post">
                    <input type="hidden" th:field="*{userId}">

                    <div class="form-group">
                        <label class="col-sm-2 control-label">用户名</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" th:value="*{username}" disabled style="background-color: #f9fafb;">
                            <span class="help-block m-b-none text-muted"><i class="fa fa-info-circle"></i> 用户名不可修改</span>
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">登录密码</label>
                        <div class="col-sm-8">
                            <input type="password" class="form-control" th:field="*{password}" placeholder="如果不修改密码请留空">
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">手机号</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" th:field="*{phone}">
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">邮箱</label>
                        <div class="col-sm-8">
                            <input type="email" class="form-control" th:field="*{email}" placeholder="请输入电子邮箱">
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">性别</label>
                        <div class="col-sm-8">
                            <label class="radio-inline"> <input type="radio" value="1" th:field="*{gender}"> 男 </label>
                            <label class="radio-inline"> <input type="radio" value="2" th:field="*{gender}"> 女 </label>
                            <label class="radio-inline"> <input type="radio" value="0" th:field="*{gender}"> 未知 </label>
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">个性签名</label>
                        <div class="col-sm-8">
                            <textarea class="form-control" rows="3" th:field="*{signature}" placeholder="写点什么介绍一下自己吧..."></textarea>
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>

                    <div class="form-group">
                        <div class="col-sm-4 col-sm-offset-2">
                            <button class="btn btn-primary" type="submit">保存修改</button>
                            <button class="btn btn-white" type="button" onclick="history.back()">取消</button>
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<script th:src="@{/js/jquery.min.js}"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>
</body>
</html>
